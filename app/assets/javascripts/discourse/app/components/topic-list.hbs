

<thead class="topic-list-header">
    {{#if this.showUserVoiceCredits}}
    <tr>
      <td style="text-align: right;" colspan="100%">
        <div>
            <canvas id="myCanvas" width="450" height="120"></canvas>
            <p><span id="blockCounter">{{this.remainingVotes}}</span>/100 remaining</p>
            <button
              type="button"
              id="save-voice-credits"
              class="btn"
              style="margin-bottom: 20px;"
              {{on "click" this.saveVoiceCredits}}
            >Save Voice Credits</button>
          </div>
      </td>
    </tr>
    {{/if}}
  {{raw
    "topic-list-header"
    canBulkSelect=this.canBulkSelect
    toggleInTitle=this.toggleInTitle
    hideCategory=this.hideCategory
    showPosters=this.showPosters
    showLikes=this.showLikes
    showOpLikes=this.showOpLikes
    showQuadraticTotals=this.showQuadraticTotals
    showUserVoiceCredits=this.showUserVoiceCredits
    remainingVotes=this.remainingVotes
    order=this.order
    ascending=this.ascending
    sortable=this.sortable
    listTitle=this.listTitle
    bulkSelectEnabled=this.bulkSelectEnabled
    canDoBulkActions=this.canDoBulkActions
  }}
</thead>

<PluginOutlet
  @name="before-topic-list-body"
  @outletArgs={{hash
    topics=this.topics
    selected=this.selected
    bulkSelectEnabled=this.bulkSelectEnabled
    lastVisitedTopic=this.lastVisitedTopic
    discoveryList=this.discoveryList
    hideCategory=this.hideCategory
  }}
/>

<tbody class="topic-list-body">
  {{#each this.filteredTopics as |topic index|}}
    <TopicListItem
      @topic={{topic}}
      @topicVote={{getFieldByObjectId this.topicVotes topic.id "total_votes"}}
      @voiceCredits={{getFieldByObjectId
        this.voiceCredits
        topic.id
        "credits_allocated"
      }}
      @showQuadraticTotals={{this.showQuadraticTotals}}
      @showUserVoiceCredits={{this.showUserVoiceCredits}}
      @remainingVotes={{this.remainingVotes}}
      @bulkSelectEnabled={{this.bulkSelectEnabled}}
      @showTopicPostBadges={{this.showTopicPostBadges}}
      @hideCategory={{this.hideCategory}}
      @showPosters={{this.showPosters}}
      @showLikes={{this.showLikes}}
      @showOpLikes={{this.showOpLikes}}
      @expandGloballyPinned={{this.expandGloballyPinned}}
      @expandAllPinned={{this.expandAllPinned}}
      @lastVisitedTopic={{this.lastVisitedTopic}}
      @selected={{this.selected}}
      @lastChecked={{this.lastChecked}}
      @tagsForUser={{this.tagsForUser}}
      @focusLastVisitedTopic={{this.focusLastVisitedTopic}}
      @index={{index}}
    />
    {{raw
      "list/visited-line"
      lastVisitedTopic=this.lastVisitedTopic
      topic=topic
    }}
    <PluginOutlet
      @name="after-topic-list-item"
      @outletArgs={{hash topic=topic index=index}}
      @connectorTagName="tr"
    />
  {{/each}}
</tbody>

<PluginOutlet
  @name="after-topic-list-body"
  @outletArgs={{hash
    topics=this.topics
    selected=this.selected
    bulkSelectEnabled=this.bulkSelectEnabled
    lastVisitedTopic=this.lastVisitedTopic
    discoveryList=this.discoveryList
    hideCategory=this.hideCategory
  }}
/>